<script>
  var subscribeText = {
   subscribeFirstTitle: 'Sold Out!',
   subscribeFirstSentence: 'Unfortinately this item is out of stock',
   subscribeFirstBtn: 'NOTIFY ME',
   subscribeSecondTitle: 'dont miss out!',
   subscribeSecondSentence: 'Lorem ipsum, dolor sit amet consectetur adipisicing elit. Veritatis, quod!',
   subscribeSecondPlaceholder: 'Email Address',
   subscribeSecondExplanetion: 'YES I want to receive excusive offers, early access, and more perks!',
   subscribeSecondBtn: 'NOTIFY ME',
   subscribeTherdTitle: 'Thanks You!',
   subscribeTherdSentence: 'Lorem ipsum, dolor sit amet consectetur adipisicing elit. Veritatis, quod!',
   subscribeTherdBtn: 'DISCOVER NEW JEWELRY',
   subscribeTherdClose: 'close'
  }
 
if ($('.AddToCartBtnDisable') || $('.AddToCartButtonCell').find('input').val() === 'OUT OF STOCK') {
  $('.AddToCartButtonCell').find('input').hide();
  $('.AddToCartBtnDisable').find('img').hide();
  const subscribeFirst = '<div class="out-of-stock-wrap"> <strong>' + subscribeText.subscribeFirstTitle +'</strong><br/> <span>' + subscribeText.subscribeFirstSentence +'</span> <a class="subscribe-out-of-stock">' + subscribeText.subscribeFirstBtn +'</a> </div>';
  $('.AddToCartBtnDisable').append(subscribeFirst);
  $('.AddToCartButtonCell').append(subscribeFirst);
};

var subscribeSecond = '<div class="subscribe-wrap"> <div class="subscribe-ttl">' + subscribeText.subscribeSecondTitle +'</div><p class="subscribe-text">' + subscribeText.subscribeSecondSentence +'</p><input type="email" class="subscribe-email" name="bron-email-foo-subscrib" placeholder="' + subscribeText.subscribeSecondPlaceholder +'"/> <input id="subscribe-input" type="checkbox" name="NewsletterSales" checked="checked"> <label for="subscribe-input" class="subscribe-select"> <span class="subscribe-check"><span class="ico-check-2"></span></span> <span class="subscribe-teaser"> ' + subscribeText.subscribeSecondExplanetion +' </span> </label> <button type="button" id="subscribe-btn" class="subscribe-out-of-stock">' + subscribeText.subscribeSecondBtn +'</button> <div class="bron_responsess-subscrib"></div></div>';

var subscribeTherd = '<div class="thank-you-subscribe"> <div class="subscribe-ttl">' + subscribeText.subscribeTherdTitle +'</div><p class="subscribe-text">' + subscribeText.subscribeTherdSentence +'</p><a href="/Products.aspx?p=360" class="subscribe-out-of-stock">' + subscribeText.subscribeTherdBtn +'</a> <div class="subscribe-close">' + subscribeText.subscribeTherdClose +'</div></div>';

$('.subscribe-out-of-stock').click(function() {
  $('.out-of-stock-wrap').hide();
  $('.AddToCartButtonCell').append(subscribeSecond);
  $('.AddToCartBtnDisable').append(subscribeSecond);
  $('#subscribe-btn').click(function () {
          var email = $('.subscribe-email').val();

          var sku = productShow.id;

          if (email != '') {
              $('.subscribe-wrap').hide();
              $('.AddToCartButtonCell').append(subscribeTherd);
              $('.AddToCartBtnDisable').append(subscribeTherd);
              $('.subscribe-close').click(function() {
                $('.thank-you-subscribe').hide();
                $('.AddToCartButtonCell').find('input').show();
                $('.AddToCartBtnDisable').find('img').show();
              });
          }

          // add append bronto img
          $(function () {

                  try {
                          $(".bron_responsess-subscrib").append($('<img style="width: auto !important;" src="https://app.bronto.com/public/?q=direct_add&fn=Public_DirectAddForm&id=biwzijqzsgxbyazetqpflbdbmdzmbhn&email=' + email + '&field3=traffic_source,set,31&list1=0bbe03ec00000000000000000000000e04f0&createCookie=1&sku='+ sku +'" width="0" height="0" border="0" alt="" />'));

                  } catch (err) {
                      console.log('Error');
                  }  
          });
      });
});


</script>

<style>
.out-of-stock-wrap, .subscribe-wrap, .thank-you-subscribe {
    text-align: center;
    border: 1px solid #DCDCDC;
    padding: 10px;
}

.subscribe-select {
    position: relative;
    display: block;
}

.subscribe-out-of-stock {
    display: block;
    background-color: #EBEBEB;
    width: 75%;
    margin: 15px auto 10px;
    padding: 5px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    text-transform: uppercase;
}

.subscribe-ttl {
      font-weight: bold;
      text-transform: uppercase;
  }
  
  
  .subscribe-text {
      width: 75%;
      padding: 0;
      margin: 10px auto;
  }
  
  .subscribe-email {
    display: block;
    padding: 5px;
    width: 75%;
    margin: 0 auto;
    margin-bottom: 10px;
  }
  
  .subscribe-check {
    position: absolute;
    top: 3px;
    border: 2px solid #000;
    width: 22px;
    height: 22px;
  }
  
  .subscribe-check span {
    display: none;
    font-size: 21px;
    color: #000;
    margin: -2px 0 0 -1px;
  }
  
  .subscribe-wrap input:checked + label .subscribe-check span {
    display: block;
  }
  
  .subscribe-teaser {
      padding-left: 30px;
      width: 75%;
      display: inline-block;
      text-align: left;
  }
  input#subscribe-input {
    display: none;
  }

  .subscribe-close {
    text-decoration: underline;
    cursor: pointer;
  
  }
  @media(max-width: 500px) {
    .subscribe-text {
      width: 95%;
      font-size: 14px;
    }
    .subscribe-email {
      width: 95%;
    }
    .subscribe-out-of-stock {
      width: 95%;
    }
    .subscribe-teaser {
      width: 95%;
      font-size: 14px;
    }
    .error {
    color: red;
    font-size: 11px;
    }
  }
</style>